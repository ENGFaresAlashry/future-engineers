<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Future Engineers – Spring Mass Simulation</title>

<style>
body {
  margin: 0;
  background: black;
  color: #00ccff;
  font-family: Arial, sans-serif;
  text-align: center;
}

h1 {
  margin: 20px;
}

#controls {
  margin-bottom: 10px;
}

button {
  background: #00ccff;
  color: black;
  border: none;
  padding: 12px 25px;
  margin: 10px;
  font-size: 16px;
  border-radius: 20px;
  cursor: pointer;
}

canvas {
  background: #111;
  display: block;
  margin: 20px auto;
  border: 1px solid #333;
}
</style>
</head>

<body>

<h1>FUTURE ENGINEERS – Spring Mass Simulation</h1>

<div id="controls">
  <button onclick="startSim()">Start</button>
  <button onclick="stopSim()">Stop</button>
</div>

<canvas id="simCanvas" width="600" height="350"></canvas>
<canvas id="posCanvas" width="600" height="150"></canvas>
<canvas id="velCanvas" width="600" height="150"></canvas>
<canvas id="engCanvas" width="600" height="150"></canvas>

<script>
/* =============================
   CANVAS SETUP
============================= */
const sim = simCanvas.getContext("2d");
const posG = posCanvas.getContext("2d");
const velG = velCanvas.getContext("2d");
const engG = engCanvas.getContext("2d");

/* =============================
   PHYSICS CONSTANTS
============================= */
const m = 0.2;
const k = 15;
const g = 9.8;
const L0 = 150;
const dt = 0.02;

let running = false;
let t = 0;
let y = 200;
let v = 0;

const ceilingY = 40;
let posData = [], velData = [], engData = [];

/* =============================
   DRAW FUNCTIONS
============================= */
function drawSpringMass() {
  sim.clearRect(0, 0, 600, 350);

  // Ceiling
  sim.fillStyle = "white";
  sim.fillRect(270, ceilingY - 10, 60, 10);

  // Spring
  sim.strokeStyle = "yellow";
  sim.lineWidth = 3;
  sim.beginPath();
  sim.moveTo(300, ceilingY);
  sim.lineTo(300, y);
  sim.stroke();

  // Mass
  sim.fillStyle = "red";
  sim.beginPath();
  sim.arc(300, y + 20, 20, 0, Math.PI * 2);
  sim.fill();
}

function drawGraph(ctx, data, color, label) {
  ctx.clearRect(0, 0, 600, 150);
  ctx.strokeStyle = color;
  ctx.beginPath();

  data.forEach((val, i) => {
    let x = i * 3;
    let y = 75 - val * 20;
    if (i === 0) ctx.moveTo(x, y);
    else ctx.lineTo(x, y);
  });

  ctx.stroke();
  ctx.fillStyle = "#00ccff";
  ctx.fillText(label, 10, 15);
}

/* =============================
   SIMULATION LOOP
============================= */
function update() {
  if (!running) return;

  let L = y - ceilingY;
  let Fs = -k * (L - L0);
  let a = (Fs - m * g * 30) / m;

  v += a * dt;
  y += v * dt;
  t += dt;

  let KE = 0.5 * m * v * v;
  let PE = 0.5 * k * Math.pow(L - L0, 2);
  let E = KE + PE;

  posData.push((y - 200) / 100);
  velData.push(v / 20);
  engData.push(E / 10);

  if (posData.length > 200) {
    posData.shift();
    velData.shift();
    engData.shift();
  }

  drawSpringMass();
  drawGraph(posG, posData, "cyan", "Position vs Time");
  drawGraph(velG, velData, "red", "Velocity vs Time");
  drawGraph(engG, engData, "lime", "Total Energy vs Time");

  requestAnimationFrame(update);
}

/* =============================
   BUTTONS
============================= */
function startSim() {
  if (!running) {
    running = true;
    update();
  }
}

function stopSim() {
  running = false;
}

drawSpringMass();
</script>

</body>
</html>
