<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Future Engineers – Spring Mass Simulation</title>

<style>
body {
  margin: 0;
  font-family: "Segoe UI", Arial, sans-serif;
  background: radial-gradient(circle at top, #111 0%, #000 70%);
  color: white;
}

/* ---------- HEADER ---------- */
header {
  text-align: center;
  padding: 30px;
}

header h1 {
  color: #00e5ff;
  font-size: 36px;
  letter-spacing: 2px;
}

header p {
  color: #aaa;
  font-size: 16px;
}

/* ---------- BUTTONS ---------- */
.controls {
  text-align: center;
  margin-bottom: 20px;
}

button {
  background: linear-gradient(135deg, #00e5ff, #0077ff);
  border: none;
  color: black;
  font-size: 16px;
  padding: 12px 30px;
  margin: 10px;
  border-radius: 30px;
  cursor: pointer;
  box-shadow: 0 0 20px #00e5ff66;
}

button:hover {
  transform: scale(1.05);
}

/* ---------- CANVAS ---------- */
canvas {
  display: block;
  margin: 25px auto;
  background: #050505;
  border-radius: 15px;
  box-shadow: 0 0 30px #00e5ff22;
}

/* ---------- GRAPHS ---------- */
.section-title {
  text-align: center;
  font-size: 26px;
  color: #00e5ff;
  margin-top: 40px;
}
</style>
</head>

<body>

<header>
  <h1>FUTURE ENGINEERS</h1>
  <p>Spring–Mass Oscillation | Interactive Physics Lab</p>
</header>

<div class="controls">
  <button onclick="startSim()">Start</button>
  <button onclick="stopSim()">Stop</button>
</div>

<canvas id="simCanvas" width="900" height="350"></canvas>

<div class="section-title">Graphs</div>

<canvas id="posGraph" width="900" height="200"></canvas>
<canvas id="velGraph" width="900" height="200"></canvas>
<canvas id="energyGraph" width="900" height="200"></canvas>

<script>
/* =========================
   PHYSICAL CONSTANTS
========================= */
const m = 0.06;      // kg
const k = 8;         // N/m
const L0 = 0.20;     // m
const L = 0.10;      // m
const g = 9.8;
const dt = 0.02;

/* =========================
   STATE VARIABLES
========================= */
let x = L;
let v = 0;
let t = 0;
let running = false;
let interval;

/* =========================
   DATA STORAGE
========================= */
let posData = [];
let velData = [];
let energyData = [];

/* =========================
   CANVASES
========================= */
const sim = document.getElementById("simCanvas").getContext("2d");
const posCtx = document.getElementById("posGraph").getContext("2d");
const velCtx = document.getElementById("velGraph").getContext("2d");
const energyCtx = document.getElementById("energyGraph").getContext("2d");

/* =========================
   DRAW SIMULATION
========================= */
function drawSimulation() {
  sim.clearRect(0, 0, 900, 350);

  // Ceiling
  sim.fillStyle = "white";
  sim.fillRect(420, 20, 60, 10);

  // Spring
  sim.strokeStyle = "yellow";
  sim.lineWidth = 4;
  sim.beginPath();
  sim.moveTo(450, 30);
  sim.lineTo(450, 30 + x * 600);
  sim.stroke();

  // Mass
  sim.fillStyle = "red";
  sim.beginPath();
  sim.arc(450, 30 + x * 600 + 20, 20, 0, Math.PI * 2);
  sim.fill();
}

/* =========================
   DRAW AXES
========================= */
function drawAxes(ctx, title, yLabel) {
  ctx.clearRect(0, 0, 900, 200);
  ctx.strokeStyle = "#444";
  ctx.lineWidth = 1;

  ctx.beginPath();
  ctx.moveTo(60, 10);
  ctx.lineTo(60, 160);
  ctx.lineTo(880, 160);
  ctx.stroke();

  ctx.fillStyle = "#00e5ff";
  ctx.font = "16px Arial";
  ctx.fillText(title, 70, 25);

  ctx.fillStyle = "#aaa";
  ctx.font = "13px Arial";
  ctx.fillText(yLabel, 10, 20);
  ctx.fillText("Time (s)", 820, 190);
}

/* =========================
   PLOT GRAPH
========================= */
function plot(ctx, data, color, scale) {
  ctx.strokeStyle = color;
  ctx.lineWidth = 2;
  ctx.beginPath();

  data.forEach((p, i) => {
    let x = 60 + i * 3;
    let y = 160 - p * scale;
    if (i === 0) ctx.moveTo(x, y);
    else ctx.lineTo(x, y);
  });

  ctx.stroke();
}

/* =========================
   UPDATE LOOP
========================= */
function update() {
  if (!running) return;

  const F = -k * (x - L0) + m * g;
  const a = F / m;

  v += a * dt;
  x += v * dt;
  t += dt;

  const KE = 0.5 * m * v * v;
  const PE = 0.5 * k * (x - L0) ** 2;
  const E = KE + PE;

  posData.push(x);
  velData.push(v);
  energyData.push(E);

  if (posData.length > 250) {
    posData.shift();
    velData.shift();
    energyData.shift();
  }

  drawSimulation();

  drawAxes(posCtx, "Position vs Time", "Position (m)");
  plot(posCtx, posData, "#00e5ff", 700);

  drawAxes(velCtx, "Velocity vs Time", "Velocity (m/s)");
  plot(velCtx, velData, "#ff3333", 60);

  drawAxes(energyCtx, "Total Energy vs Time", "Energy (J)");
  plot(energyCtx, energyData, "#00ff88", 2500);
}

/* =========================
   CONTROLS
========================= */
function startSim() {
  if (!running) {
    running = true;
    interval = setInterval(update, 20);
  }
}

function stopSim() {
  running = false;
  clearInterval(interval);
}

/* INITIAL DRAW */
drawSimulation();
</script>

</body>
</html>
