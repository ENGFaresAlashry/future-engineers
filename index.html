<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Future Engineers | Spring–Mass Lab</title>

<script src="https://www.glowscript.org/lib/glow.3.2.min.js"></script>
<script src="https://www.glowscript.org/lib/RSrun.3.2.min.js"></script>

<style>
body {
    margin: 0;
    background: #000;
    color: white;
    font-family: Arial, sans-serif;
}

header {
    text-align: center;
    padding: 20px;
    font-size: 32px;
    color: #00c6ff;
}
</style>
</head>

<body>

<header>FUTURE ENGINEERS – Spring Mass Simulation</header>

<div id="glowscript"></div>

<script type="text/javascript">
"use strict";

RSrun("glowscript", function () {

    let running = false;

    let scene = canvas({
        width: window.innerWidth,
        height: window.innerHeight * 0.75,
        background: color.black
    });

    button({ text: "Start", bind: () => running = true });
    button({ text: "Stop",  bind: () => running = false });
    scene.append_to_caption("\n\n");

    const g = 9.8;
    const m = 0.1;
    const k = 8;
    const L0 = 0.20;
    const L = 0.10;
    const dt = 0.001;

    let x_eq = (m * g) / k;
    let y = (L0 - L) - x_eq;
    let v = 0;
    let t = 0;

    let floor = box({
        pos: vec(0,0,0),
        size: vec(0.4,0.02,0.4),
        color: color.green
    });

    let block = box({
        pos: vec(0,L,0),
        size: vec(0.05,0.05,0.05),
        color: color.orange
    });

    let spring = helix({
        pos: floor.pos,
        axis: block.pos.sub(floor.pos),
        radius: 0.02,
        coils: 15
    });

    let pos_graph = graph({
        title: "Position vs Time",
        xtitle: "Time (s)",
        ytitle: "Displacement (m)"
    });
    let pos_curve = gcurve({ color: color.cyan });

    while (true) {
        rate(1000);

        if (running) {
            let a = (-k * y) / m;
            v += a * dt;
            y += v * dt;

            block.pos.y = L0 - (y + x_eq);
            spring.axis = block.pos.sub(floor.pos);

            pos_curve.plot(t, y);
            t += dt;
        }
    }
});
</script>

</body>
</html>
